(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{191:function(e,t,a){e.exports=a(394)},201:function(e,t,a){},204:function(e,t,a){},206:function(e,t,a){},34:function(e,t,a){e.exports=a.p+"static/media/cancel.b6512207.svg"},390:function(e,t,a){},392:function(e,t,a){},394:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(33),o=a.n(l),c=a(11),s=a(12),u=a(14),i=a(13),h=a(15),p=a(7),m=a(10),d=a.n(m),f=a(39),g=a(61),b=a(38),y=(a(201),a(96),a(34)),v=a.n(y),k=(a(204),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("tbody",null,r.a.createElement("tr",{key:this.props.key},r.a.createElement("td",{id:"name"},this.props.stockName," "),r.a.createElement("td",null,this.props.purchaseValue,this.props.currencySign),r.a.createElement("td",null,this.props.quantity),r.a.createElement("td",null,this.props.currentValue,this.props.currencySign),r.a.createElement("td",null,this.props.totalValue,this.props.currencySign),r.a.createElement("td",null,this.props.purchaseDate),r.a.createElement("td",null,"  ",r.a.createElement("div",null,r.a.createElement(b.a,{id:"cancel",src:v.a,onClick:this.props.delete}))))))}}]),t}(n.Component)),E=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("select",{value:this.props.currencyOption,onChange:this.props.changeData},r.a.createElement("option",{value:"EUR"},"EUR"),r.a.createElement("option",{value:"USD"},"USD")))}}]),t}(n.Component),S=a(160),O=(a(206),a(25)),N=(a(390),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"filterGraphData",value:function(){var e=this.props.dataToSend,t=this.props.stockNames,a=[];null!==a&&(a=[]);for(var n=0;n<t.length;n++){var r=t[n].toUpperCase(),l={name:r,color:this.get_random_color(),data:e[r].chart};a.push(l)}return a}},{key:"get_random_color",value:function(){function e(){var e=Math.floor(256*Math.random()).toString(16);return("0"+String(e)).substr(-2)}return"#"+e()+e()+e()}},{key:"render",value:function(){var e=this.filterGraphData();return r.a.createElement(O.d,{width:"80%",height:400},r.a.createElement(O.c,{margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(O.f,{dataKey:"label",tick:!1,allowDuplicatedCategory:!1}),r.a.createElement(O.g,{dataKey:"uClose"}),r.a.createElement(O.e,null),r.a.createElement(O.a,null),e.map(function(e){return r.a.createElement(O.b,{type:"monotone",dataKey:"uClose",data:e.data,name:e.name,key:e.name,stroke:e.color})})))}}]),t}(n.Component)),V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).graphDraw=function(){var e=Object(f.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.fetchingData();case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:a.setState({fetchedValue:n});case 10:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),a.state={timeSelected:"5d",fetchedValue:[],stockNames:[]},a.state.stockNames=a.filterStockNames(),a.handleTimeChange=a.handleTimeChange.bind(Object(p.a)(Object(p.a)(a))),a.graphDraw=a.graphDraw.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"fetchingData",value:function(){var e=Object(f.a)(d.a.mark(function e(){var t,a,n,r,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Tpk_3f5f6e08c5864242aa0503c8d2ef115a","https://sandbox.iexapis.com/stable/stock/market/batch?symbols=",t=this.state.timeSelected,""===(a=this.state.stockNames)&&0===a.length){e.next=15;break}return n="https://sandbox.iexapis.com/stable/stock/market/batch?symbols="+a.toString()+"&types=chart&filter=uClose,date,label&range="+t+"&last=5&token=Tpk_3f5f6e08c5864242aa0503c8d2ef115a",e.next=8,fetch(n);case 8:return r=e.sent,e.next=11,r.json();case 11:return l=e.sent,e.next=14,l;case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"filterStockNames",value:function(){var e=[],t=this.props.stockArray,a=this.props.portfolioId;t.map(function(t){null!==t&&t.portfolioID===a&&e.push(t.stockName)});return Object(S.a)(new Set(e))}},{key:"handleTimeChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"componentDidMount",value:function(){this.graphDraw()}},{key:"render",value:function(){var e,t=this.state.fetchedValue;0!==t.length&&(e=r.a.createElement(n.Fragment,null,r.a.createElement(N,{dataToSend:t,stockNames:this.state.stockNames})));var a=r.a.createElement("div",{className:"mainContainer"},r.a.createElement("div",{className:"graphContainer"},r.a.createElement("div",{className:"portfolioName"},r.a.createElement("span",null,this.props.portfolioName," performance chart"),r.a.createElement(b.a,{id:"cancel",src:v.a,onClick:this.props.onClose})),r.a.createElement("br",null),r.a.createElement("div",{className:"graphCollection"},e),r.a.createElement("div",{className:"timeCollection"},r.a.createElement("div",null,r.a.createElement("span",null,"Time Interval "),r.a.createElement("select",{name:"timeSelected",onChange:this.handleTimeChange},r.a.createElement("option",{value:"5d"},"5 days"),r.a.createElement("option",{value:"1m"},"1 month"),r.a.createElement("option",{value:"3m"},"3 month"),r.a.createElement("option",{value:"6m"},"6 month"),r.a.createElement("option",{value:"1y"},"1 year"),r.a.createElement("option",{value:"2y"},"2 year"),r.a.createElement("option",{value:"5y"},"5 year"))),r.a.createElement("button",{className:"buttonAdd",onClick:this.graphDraw},"Draw"))));return r.a.createElement("div",null,a)}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).handleFormChange=function(e){a.setState(Object(g.a)({},e.target.name,e.target.value))},a.handleAdd=function(){var e=Object(f.a)(d.a.mark(function e(t){var n,r,l,o,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.stockID=a.stockID+1,n=Object.assign([],a.state.stockArray),r=JSON.parse(localStorage.getItem("stockData")),e.prev=4,e.next=7,a.fetchingData();case 7:l=e.sent,o=(a.state.quantity*l.currentValue).toFixed(2),null===r||0===r.length?(n.push({portfolioID:a.props.id,ids:a.stockID,stockName:a.state.stockName,datePurchase:a.state.datePurchase,quantity:a.state.quantity,currentValue:l.currentValue,purchaseValue:l.purchaseValue,totalValue:o}),localStorage.setItem("stockData",JSON.stringify(n))):(c=parseInt(r[r.length-1].ids),a.stockID=a.stockID+c,(n=r).push({portfolioID:a.props.id,ids:a.stockID,stockName:a.state.stockName,datePurchase:a.state.datePurchase,quantity:a.state.quantity,currentValue:l.currentValue,purchaseValue:l.purchaseValue,totalValue:o}),localStorage.setItem("stockData",JSON.stringify(n))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),alert("Invalid format of data/ check that the dates are not the weekends? ");case 15:a.setState({stockArray:JSON.parse(localStorage.getItem("stockData")),portfolioValue:a.calculateTotalValue()});case 16:case"end":return e.stop()}},e,null,[[4,12]])}));return function(t){return e.apply(this,arguments)}}(),a.handleDelete=function(e){var t=JSON.parse(localStorage.getItem("stockData"));t.splice(e,1),a.setState({stockArray:t}),a.setState(function(e){return{portfolioValue:a.calculateTotalValue()}}),localStorage.setItem("stockData",JSON.stringify(t))},a.handleShowGraph=function(e){e.preventDefault(),a.setState({showGraph:!a.state.showGraph})},a.stockID=0,a.initialState={portfolioID:"",ids:"",stockName:"",datePurchase:"",purchaseValue:"",currentValue:"",quantity:"",totalValue:"",portfolioValue:"",stockArray:[],currencyOption:"EUR",currencySign:"\u20ac",showGraph:!1},a.state=a.initialState,a.state.portfolioValue=a.calculateTotalValue(),a.handleCurrencyChange=a.handleCurrencyChange.bind(Object(p.a)(Object(p.a)(a))),a.hanleAdd=a.handleAdd.bind(Object(p.a)(Object(p.a)(a))),a.hanleShowGraph=a.handleShowGraph.bind(Object(p.a)(Object(p.a)(a))),a.handleFormChange=a.handleFormChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleCurrencyChange",value:function(e){this.setState({currencyOption:e.target.value}),this.changeCurrency(e.target.value)}},{key:"changeCurrency",value:function(e){var t=Object.assign([],this.state.stockArray),a=[],n=this.state.portfolioValue;switch(e){case"USD":a.length=0,t.map(function(e){var t={purchaseValue:(1.1*e.purchaseValue).toFixed(2),currentValue:(1.1*e.currentValue).toFixed(2),totalValue:(1.1*e.totalValue).toFixed(2)};a.push(t)}),this.setState({currencySign:"$",portfolioValue:(1.1*n).toFixed(2)});break;case"EUR":a.length=0,t.map(function(e){var t={purchaseValue:(e.purchaseValue/1.1).toFixed(2),currentValue:(e.currentValue/1.1).toFixed(2),totalValue:(e.totalValue/1.1).toFixed(2)};a.push(t)}),this.setState({currencySign:"\u20ac",portfolioValue:(n/1.1).toFixed(2)})}t.map(function(e,t){a.map(function(a,n){t===n&&(e.purchaseValue=a.purchaseValue,e.currentValue=a.currentValue,e.totalValue=a.totalValue)})}),this.setState({stockArray:t})}},{key:"calculateTotalValue",value:function(){var e=Object.assign([],this.state.stockArray);if(null!==(e=JSON.parse(localStorage.getItem("stockData")))){for(var t=0,a=0;a<e.length;a++)e[a].portfolioID===this.props.id&&(t+=parseFloat(e[a].totalValue));return t.toFixed(2)}}},{key:"fetchingData",value:function(){var e=Object(f.a)(d.a.mark(function e(){var t,a,n,r,l,o,c,s,u,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="Tpk_3f5f6e08c5864242aa0503c8d2ef115a",a="https://sandbox.iexapis.com/stable/stock/",n=this.state.datePurchase.split("-").join(""),r=this.state.stockName,l=a+r+"/quote/latestPrice?token="+t,o=a+r+"/chart/date/"+n+"?chartByDay=true&token="+t,e.next=8,fetch(l);case 8:return c=e.sent,e.next=11,c.json();case 11:return s=e.sent,e.next=14,fetch(o);case 14:return u=e.sent,e.next=17,u.json();case 17:return i=e.sent,e.next=20,{currentValue:s,purchaseValue:i[0].uHigh};case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=JSON.parse(localStorage.getItem("stockData"));null!==e&&this.setState({stockArray:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.stockArray,l=t.stockName,o=t.quantity,c=t.datePurchase,s=t.currencyOption,u=t.currencySign,i=t.showGraph,h=(l.length&&o.length&&c.length)>0,p=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"Header"},r.a.createElement("span",null,this.props.name),r.a.createElement(E,{currencyOption:s,changeData:this.handleCurrencyChange}),r.a.createElement("div",null,r.a.createElement(b.a,{id:"cancel",src:v.a,onClick:this.props.delete}))),r.a.createElement("div",{className:"tableWrapper"},r.a.createElement("table",{id:"customers"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Symbol"),r.a.createElement("th",null,"Purchase Value"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Current Value"),r.a.createElement("th",null,"Total Value"),r.a.createElement("th",null,"Purchased Date"),r.a.createElement("th",null,"Remove"))),r.a.createElement("div",null,a.map(function(t,a){if(null!==t&&t.portfolioID===e.props.id)return r.a.createElement(k,{key:t.ids,stockName:t.stockName,currentValue:t.currentValue,purchaseValue:t.purchaseValue,quantity:t.quantity,totalValue:t.totalValue,purchaseDate:t.datePurchase,delete:e.handleDelete.bind(e,a),currencySign:u})})))),r.a.createElement("form",{ref:"stock"},r.a.createElement("div",{className:"tableWrapper",style:{overflow:"hidden"}},r.a.createElement("input",{type:"text",name:"stockName",onChange:this.handleFormChange,placeholder:"Symbol",id:"name"}),r.a.createElement("input",{type:"date",name:"datePurchase",onChange:this.handleFormChange,placeholder:"Unit Value"}),r.a.createElement("input",{type:"number",name:"quantity",onChange:this.handleFormChange,placeholder:"Quantity"})),r.a.createElement("div",{className:"Header",style:{width:"fit-content"}},r.a.createElement("span",null,"Total value of ",this.props.name," :",r.a.createElement("span",{id:"amount"})," ",this.state.portfolioValue),r.a.createElement("span",null,u)),r.a.createElement("div",{className:"Header"},r.a.createElement("button",{onClick:this.handleAdd,disabled:!h,className:"button buttonAdd",type:"submit"},"Add Stock"),r.a.createElement("button",{onClick:this.handleShowGraph,className:"button buttonAdd",type:"submit"},"Perf graph")))),m=r.a.createElement("div",null,r.a.createElement(V,{portfolioName:this.props.name,portfolioId:this.props.id,stockArray:a,onClose:this.handleShowGraph}));return i?r.a.createElement(n.Fragment,null,p,m):p}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).handlePortfolioName=function(e){a.setState({portfolioName:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.postID=a.postID+1;var t=Object.assign([],a.state.users),n=a.state.portfolioName,r=JSON.parse(localStorage.getItem("portfolio"));if(null===r||0===r.length)t.push({id:a.postID,portfolioName:n}),localStorage.setItem("portfolio",JSON.stringify(t));else{var l=parseInt(r[r.length-1].id);a.postID=a.postID+l,(t=r).push({id:a.postID,portfolioName:n}),localStorage.setItem("portfolio",JSON.stringify(t))}a.setState({name:"",users:JSON.parse(localStorage.getItem("portfolio"))}),a.handleFormReset()},a.handleDelete=function(e,t){var n=JSON.parse(localStorage.getItem("portfolio")),r=JSON.parse(localStorage.getItem("stockData")),l=[];null!==r&&(l=r.filter(function(e){return e.portfolioID!==t})),localStorage.setItem("stockData",JSON.stringify(l)),n.splice(e,1),a.setState({users:n}),localStorage.setItem("portfolio",JSON.stringify(n))},a.handleFormReset=function(){a.setState({portfolioName:""})},a.postID=0,a.state={id:"",portfolioName:"",users:[]},a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("portfolio");null!==e&&this.setState({users:JSON.parse(e)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.portfolioName,l=this.state.portfolioName.length>0;return r.a.createElement("div",{className:"App"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"portfolioAdd"},r.a.createElement("button",{disabled:!l,className:"button buttonAdd",type:"submit"},"Add new portfolio"),r.a.createElement("input",{id:"inputPorfolio",type:"text",value:n,onChange:this.handlePortfolioName,placeholder:"Name of the portfolio"}))),r.a.createElement("div",{className:"content"},a.map(function(t,a){return r.a.createElement(D,{key:t.id,id:t.id,name:t.portfolioName,delete:e.handleDelete.bind(e,a,t.id),usersArray:e.state.users})})))}}]),t}(n.Component);a(392);o.a.render(r.a.createElement(j,null),document.getElementById("root"))},96:function(e,t,a){}},[[191,2,1]]]);
//# sourceMappingURL=main.f53b84bc.chunk.js.map